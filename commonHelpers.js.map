{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function searchPictures(searchTerm, page, limit) {\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?key=43779125-040e3030fad6a4afa34a77542&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${limit}`);\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching pictures:', error);\n        throw error;\n    }\n}\n\n","export function listPictures(gallery, pictures, lightbox) {\n    const result = pictures.hits.map((picture) => {\n        return `<li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${picture.largeImageURL}\">\n                        <img class=\"gallery-image\" src=\"${picture.webformatURL}\" alt=\"${picture.tags}\">\n                    </a>\n                    <ul class=\"info\">\n                        <li class=\"info-list\">Likes: <span>${picture.likes}</span></li>\n                        <li class=\"info-list\">Views: <span>${picture.views}</span></li>\n                        <li class=\"info-list\">Comments: <span>${picture.comments}</span></li>\n                        <li class=\"info-list\">Downloads: <span>${picture.downloads}</span></li>\n                    </ul>\n                </li>`;\n    }).join('');\n    gallery.insertAdjacentHTML('beforeend', result);\n    lightbox.refresh();\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { searchPictures } from './js/pixabay-api.js';\nimport { listPictures } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('input[name=\"text\"]');\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet searchTerm = \"\";\nlet page = 1;\nconst limit = 15;\nlet totalHits = 0;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    searchTerm = input.value.trim();\n    if (searchTerm !== \"\") {\n        page = 1; // Скидання номера сторінки при новому пошуку\n        gallery.innerHTML = \"\";\n        hideLoadMoreButton();\n        showLoader();\n        await fetchAndRenderPictures();\n    }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    page += 1;\n    showLoader();\n    await fetchAndRenderPictures();\n});\n\nasync function fetchAndRenderPictures() {\n    try {\n        const pictures = await searchPictures(searchTerm, page, limit);\n        totalHits = pictures.totalHits;\n\n        if (pictures.hits.length === 0 && page === 1) {\n            iziToast.info({ message: 'Sorry, there are no images matching your search query. Please try again!', position: 'center' });\n            hideLoadMoreButton();\n        } else {\n            listPictures(gallery, pictures, lightbox);\n            if (page * limit < totalHits) {\n                showLoadMoreButton();\n            } else {\n                hideLoadMoreButton();\n                if (page * limit >= totalHits && page > 1) {\n                    iziToast.error({ message: \"We're sorry, but you've reached the end of search results.\", position: 'bottomCenter' });\n                }\n            }\n            smoothScroll();\n        }\n    } catch (error) {\n        console.log(error);\n        iziToast.error({ message: 'Sorry, there was an error processing your request.', position: 'center' });\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction showLoadMoreButton() {\n    loadMoreButton.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n    loadMoreButton.style.display = 'none';\n}\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}"],"names":["searchPictures","searchTerm","page","limit","axios","error","listPictures","gallery","pictures","lightbox","result","picture","form","input","loader","loadMoreButton","totalHits","event","hideLoadMoreButton","showLoader","fetchAndRenderPictures","iziToast","showLoadMoreButton","smoothScroll","hideLoader","SimpleLightbox","cardHeight"],"mappings":"owBACO,eAAeA,EAAeC,EAAYC,EAAMC,EAAO,CAC1D,GAAI,CAEA,OADiB,MAAMC,EAAM,IAAI,qEAAqEH,CAAU,iEAAiEC,CAAI,aAAaC,CAAK,EAAE,GACzL,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,2BAA4BA,CAAK,EACzCA,CACT,CACL,CCTO,SAASC,EAAaC,EAASC,EAAUC,EAAU,CACtD,MAAMC,EAASF,EAAS,KAAK,IAAKG,GACvB;AAAA,oDACqCA,EAAQ,aAAa;AAAA,0DACfA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,6DAGvCA,EAAQ,KAAK;AAAA,6DACbA,EAAQ,KAAK;AAAA,gEACVA,EAAQ,QAAQ;AAAA,iEACfA,EAAQ,SAAS;AAAA;AAAA,sBAG7E,EAAE,KAAK,EAAE,EACVJ,EAAQ,mBAAmB,YAAaG,CAAM,EAC9CD,EAAS,QAAO,CACpB,CCRA,MAAMG,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,oBAAoB,EACnDN,EAAU,SAAS,cAAc,UAAU,EAC3CO,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAId,EAAa,GACbC,EAAO,EACX,MAAMC,EAAQ,GACd,IAAIa,EAAY,EAEhBJ,EAAK,iBAAiB,SAAU,MAAOK,GAAU,CAC7CA,EAAM,eAAc,EACpBhB,EAAaY,EAAM,MAAM,OACrBZ,IAAe,KACfC,EAAO,EACPK,EAAQ,UAAY,GACpBW,IACAC,IACA,MAAMC,EAAsB,EAEpC,CAAC,EAEDL,EAAe,iBAAiB,QAAS,SAAY,CACjDb,GAAQ,EACRiB,IACA,MAAMC,EAAsB,CAChC,CAAC,EAED,eAAeA,GAAyB,CACpC,GAAI,CACA,MAAMZ,EAAW,MAAMR,EAAeC,EAAYC,EAAMC,CAAK,EAC7Da,EAAYR,EAAS,UAEjBA,EAAS,KAAK,SAAW,GAAKN,IAAS,GACvCmB,EAAS,KAAK,CAAE,QAAS,2EAA4E,SAAU,QAAQ,CAAE,EACzHH,MAEAZ,EAAaC,EAASC,EAAUC,CAAQ,EACpCP,EAAOC,EAAQa,EACfM,KAEAJ,IACIhB,EAAOC,GAASa,GAAad,EAAO,GACpCmB,EAAS,MAAM,CAAE,QAAS,6DAA8D,SAAU,cAAc,CAAE,GAG1HE,IAEP,OAAQlB,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBgB,EAAS,MAAM,CAAE,QAAS,qDAAsD,SAAU,QAAQ,CAAE,CAC5G,QAAc,CACNG,GACH,CACL,CAEA,SAASF,GAAqB,CAC1BP,EAAe,MAAM,QAAU,OACnC,CAEA,SAASG,GAAqB,CAC1BH,EAAe,MAAM,QAAU,MACnC,CAEA,SAASI,GAAa,CAClBL,EAAO,MAAM,QAAU,OAC3B,CAEA,SAASU,GAAa,CAClBV,EAAO,MAAM,QAAU,MAC3B,CAEA,MAAML,EAAW,IAAIgB,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAED,SAASF,GAAe,CACpB,KAAM,CAAE,OAAQG,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}